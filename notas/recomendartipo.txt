#recomendar tipo de fertilizante para N e P

nutrientes_sujeitos_a_tipo  = ["N", "P"]

Tipo_de_fertilizantes=[]

cultura_instalada = input("A cultura já está instalada? (Responda: Sim ou Não) ")

Notas=[]

ph= 5

for nutriente in nutrientes_sujeitos_a_tipo:
    if nutriente == "N":
        if cultura_instalada == "Não":
            Tipo_de_fertilizantes.append("NH4")
        elif cultura_instalada == "Sim":
            Chuva = input("É provavel ocorrer chuva neste mês? (Responda: Sim ou Não) ")
            if Chuva == "Sim":
                if ph < 5.5:
                    Tipo_de_fertilizantes.append("NH4")
                else:
                    Tipo_de_fertilizantes.append("NH4")
                    Notas.append("Enterrar fertilizante para evitar volatilização do NH3")
            elif Chuva == "Não":
                falta_oxigenio = input("A sua cultura sofre alagamento? (Responda: Sim ou Não) ")
                if falta_oxigenio == "Sim":
                    Tipo_de_fertilizantes.append("NH4")
                elif falta_oxigenio == "Não":
                    Tipo_de_fertilizantes.append("NO3")
                    Tipo_de_fertilizantes.append("Ureia")
    elif nutriente == "P":
        if cultura_instalada == "Não":
            Tipo_de_fertilizantes.append("Fosfatos Naturais Moídos")
        elif cultura_instalada == "Sim":
            Tipo_de_fertilizantes.append("Fosforo_soluvel")
                          
print(Tipo_de_fertilizantes)
print(Notas)
                
            #recomendar formula de fertilizante para N,P,K,Ca,Mg

nutrientes_formula  = ["N", "P", "K", "Ca", "Mg"]
fertilizantes_recomendados = []

for nutriente in nutrientes_formula:
    if nutriente == "N":
        if "NH4" in Tipo_de_fertilizantes:
            if ph < 5.5:
                fertilizantes_recomendados.append("Sulfato_Amonio")
        elif "NO3" or "Ureia" in Tipo_de_fertilizantes:
            fertilizantes_recomendados.append("Nitrato_Amonio")
            fertilizantes_recomendados.append("Ureia")
    elif nutriente == "P":
        if "Fosfatos Naturais Moídos" in Tipo_de_fertilizantes:
            fertilizantes_recomendados.append("rocha_fosfatada")
        elif "Fosforo_soluvel" in Tipo_de_fertilizantes: 
            fertilizantes_recomendados.append("Superfosfato_Normal")
            fertilizantes_recomendados.append("Superfosfato_triplo")
    elif nutriente == "K":
        fertilizantes_recomendados.append("Sulfato_potassio")
        if "NO3" or "Ureia" in Tipo_de_fertilizantes:
            fertilizantes_recomendados.append("Nitrato_potassio")
    elif nutriente == "Ca":
        fertilizantes_recomendados.append("Nitrato_Calcio")
    elif nutriente == "Mg":
        fertilizantes_recomendados.append("Sulfato_magnesio")
        if "NO3" or "Ureia" in Tipo_de_fertilizantes:
            fertilizantes_recomendados.append("Nitrato_magnesio")
        
print(fertilizantes_recomendados)


class Fertilizante:
    def __init__(self, nome, N, P2O5, K2O, CaO, MgO, SO3, preco):
        self.nome = nome
        self.N = N
        self.P2O5 = P2O5
        self.K2O = K2O
        self.CaO = CaO
        self.MgO = MgO
        self.SO3 = SO3
        self.preco = preco

Fertilizantes= [
    
Fertilizante(nome="Sulfato_Amonio", N = 21.2, P2O5= 0, K2O= 0, CaO=0, MgO=0, SO3=60.6, preco=0.276 ),

Fertilizante(nome="Nitrato_Calcio", N = 15.6, P2O5= 0, K2O= 0, CaO=26, MgO=0, SO3=0, preco= 0.326),

Fertilizante(nome="Nitrato_Amonio", N = 32.4, P2O5= 0, K2O= 0, CaO=0, MgO=0, SO3=0, preco= 0.43),

Fertilizante(nome="Sulfato_magnesio", N = 0, P2O5= 0, K2O= 0, CaO=0, MgO=15.9, SO3=31.8, preco=0.6 ),

Fertilizante(nome="Nitrato_magnesio", N = 11, P2O5= 0, K2O= 0, CaO=0, MgO=15.7, SO3=0, preco=  0.6),

Fertilizante(nome="Nitrato_potassio", N = 13.8, P2O5= 0, K2O= 46.5, CaO=0, MgO=0, SO3=0, preco= 0.9),

Fertilizante(nome="Sulfato_potassio", N = 0, P2O5= 0, K2O= 52.1, CaO=0, MgO=0, SO3=44.1, preco=0.718 ),

Fertilizante(nome="Ureia", N = 46, P2O5= 0, K2O= 0, CaO=0, MgO=0, SO3=0, preco=0.48 ),

Fertilizante(nome="Superfosfato_Normal", N = 0, P2O5= 18, K2O= 0, CaO=32.2, MgO=0, SO3=30, preco= 0.23),

Fertilizante(nome="Superfosfato_triplo", N = 0, P2O5= 42, K2O= 0, CaO=22.4, MgO=0, SO3=5, preco=0.428 ),

Fertilizante(nome="rocha_fosfatada", N = 0, P2O5= 33.4, K2O= 0, CaO=45.4, MgO=0, SO3=0, preco= 0.345)

]
#passar uma lista de instancias de fertilizantes que estejam incluidos na listra de fertilizantes recoemndados para poder ter acesso aos objetos
fertilizantes_selecionados = [Fertilizante for Fertilizante in Fertilizantes if Fertilizante.nome in fertilizantes_recomendados]
for fertilizante in fertilizantes_selecionados:
    print(f"{fertilizante.nome}")
nutrientes_para_seleção=["MgO","CaO","K2O","P2O5","N"]

for nutriente in nutrientes_para_seleção:
    
    fertilizante_max_nutriente = max(fertilizantes_selecionados, key=lambda x: getattr(x, nutriente))
    print(f"El fertilizante con el mayor porcentaje de {nutriente} es: {fertilizante_max_nutriente.nome} con {getattr(fertilizante_max_nutriente, nutriente)}%")